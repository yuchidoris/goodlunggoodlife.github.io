<!DOCTYPE html>
<html>
  <head>
    <title>Combine Images</title>
    <style>
      * {
        font-family: 'Poppins', sans-serif;
      }
    </style>
    <link href="https://fonts.googleapis.com/css?family=Poppins&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="style.css">
  </head>
  <body>
    <h1>#GoodlungGoodlife Generator</h1>
    <div class="text-box">
      <p>  Step1. Choose the frame of the photo:</p>
    </div>
    

    <br><br>
    <div class="btn-group btn-group-toggle" data-toggle="buttons">
      <label class="btn btn-secondary">
        <input type="radio" name="frame" value="frame1.png">
        <img src="frame1.png" width="216" height="216">
      </label>
      <label class="btn btn-secondary">
        <input type="radio" name="frame" value="frame2.png">
        <img src="frame2.png" width="216" height="216">
      </label>
      <label class="btn btn-secondary">
        <input type="radio" name="frame" value="frame3.png">
        <img src="frame3.png" width="216" height="216">
      </label>
      <label class="btn btn-secondary">
        <input type="radio" name="frame" value="frame3.png">
        <img src="frame4.png" width="216" height="216">
      </label>
    </div>
    <br>
    
    <div class="text-box">
      <p>  Step2. Select a photo you want to put in the frame</p>
    </div>
    <br/>
    <div id="output-container">
      <img id="frame-photo" src="" width="216" height="216">
      <img id="user-photo" src="" width="216" height="216" >
    </div>
    
    <div class="file-upload">
      <input type="file" accept="image/*" id="user-image" name="user-image">
      <label for="user-image" class="custom-file-upload">Choose a file</label>
    </div>
    
   

    <br><br>
    
    <div class="text-box">
      <p>  Step3. Press the combine button to get the #goodlunggoodlife exclusively for you</p>
    </div>
    <br/>
    <div id="output-container2">
      <img id="output-image" src="" width="216" height="216">
    </div>
    
    <button id="combine-btn">Combine Images</button>
    <br><br>
    
    <div class="text-box">
      <p>Congratulations on getting your own photo!<br /> Press the download button to save to your device<br /> (for cell phones, press and hold the image to save)</p>
    </div>
    <div class="logo">
    </div>
    


    <script>
      window.onload = function() {
        const combineBtn = document.getElementById('combine-btn');
        const userPhoto = document.getElementById('user-photo');
        const framePhoto = document.getElementById('frame-photo');
        const outputImage = document.getElementById('output-image');
        const outputContainer = document.getElementById('output-container');
        outputContainer.style.display = 'none';

        combineBtn.addEventListener('click', function() {
          // Get the selected frame image filename
          const selectedFrame = document.querySelector('input[name="frame"]:checked').value;
          document.getElementById("output-container2").style.display = "block";
          

          

          // Load the selected frame image
          const frame = new Image();
          frame.src = selectedFrame;

          const MAX_CANVAS_SIZE = 1024;

// Load user photo
const userImageInput = document.getElementById('user-image');
userImageInput.addEventListener('change', function(e) {
  outputContainer.style.display = 'block';
  const file = e.target.files[0];
  const reader = new FileReader();
  reader.onload = function(event) {
    const img = new Image();
    img.src = event.target.result;
    img.onload = function() {
      // Calculate image size and aspect ratio
      const aspectRatio = img.width / img.height;
      let width, height;
      if (aspectRatio >= 1) {
        width = Math.min(MAX_CANVAS_SIZE, img.width);
        height = width / aspectRatio;
      } else {
        height = Math.min(MAX_CANVAS_SIZE, img.height);
        width = height * aspectRatio;
      }

      // Draw image on canvas
      const canvas = document.createElement('canvas');
      const context = canvas.getContext('2d');
      canvas.width = width;
      canvas.height = height;
      context.drawImage(img, 0, 0, width, height);
      userPhoto.src = canvas.toDataURL();
    };
  };
  reader.readAsDataURL(file);
});

// Combine user photo and frame photo
const userImage = userPhoto.src;
const frameImage = framePhoto.src;
if (userImage && frameImage) {
  outputContainer.style.display = 'block';
  const canvas = document.createElement('canvas');
  const context = canvas.getContext('2d');
  canvas.width = frame.width;
  canvas.height = frame.height;
  const user = new Image();
  user.crossOrigin = "Anonymous";
  user.onload = function () {
    // Calculate image size and aspect ratio
    const aspectRatio = user.width / user.height;
    let width, height;
    if (aspectRatio >= 1) {
      width = Math.min(MAX_CANVAS_SIZE, user.width);
      height = width / aspectRatio;
    } else {
      height = Math.min(MAX_CANVAS_SIZE, user.height);
      width = height * aspectRatio;
    }

    // Calculate position of user image
    const x = (canvas.width - width) / 2;
    const y = (canvas.height - height) / 2;

    // Draw images on canvas
    context.drawImage(user, x, y, width, height);
    context.drawImage(frame, 0, 0, canvas.width, canvas.height);
    outputImage.src = canvas.toDataURL();
  };
  user.src = userImage;
}

        // Load frame photo
        const frameImageInputs = document.querySelectorAll('input[name="frame"]');
        frameImageInputs.forEach(function(input) {
          input.addEventListener('change', function(e) {
            framePhoto.src = e.target.value;
            outputContainer.style.display = 'block';
          });
        });
        
      }
    </script>
    <button id="download-btn">Download Image</button>

    <script>
      const downloadBtn = document.getElementById('download-btn');
      const outputImage = document.getElementById('output-image');
    
      downloadBtn.addEventListener('click', function() {
        const link = document.createElement('a');
        link.download = 'combined-image.png';
        link.href = outputImage.src;
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);
      });
    </script>

    

  

    
    
    
  </body>
</html>





